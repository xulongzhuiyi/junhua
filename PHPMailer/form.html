<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <h2 class="text-center py-5">Contact Us</h2>
    <div class="row justify-content-md-center">
        <div class="col-lg-6 ">
            <form id="contact-form" action="send_email.php" method="post" class="php-email-form needs-validation"
                autocomplete="on" novalidate>
                <div class="row gy-4">
                    <div class="col-md-12">
                        <textarea class="form-control" name="message" rows="6" placeholder="Message"
                            required></textarea>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Please choose a username.</div>
                    </div>


                    <div class="col-md-12 ">
                        <input type="email" class="form-control" name="email" placeholder="Your Email" required
                            autocomplete="email">
                    </div>

                    <div class="col-md-6">
                        <input type="text" name="name" class="form-control" placeholder="Your Name" autocomplete="name">
                    </div>


                    <div class="col-md-6">
                        <input type="tel" class="form-control" name="tel" placeholder="Your Tel" autocomplete="tel">
                    </div>

                    <div class="col-md-12 text-center">
                        <div class="loading" style="display: none;">Loading</div>
                        <div class="alert alert-danger alert-dismissible error-message" style="display: none;">
                            Message could not be sent.
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        <div class="alert alert-success alert-dismissible alert-dismissible sent-message"
                            style="display: none;">
                            Your message has been sent. Thank you!
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        <button type="submit" class="btn btn-primary">Send Message</button>
                    </div>

                </div>
            </form>
            
            <script>
      // 示例JavaScript代码，用于禁用包含无效字段的表单提交
      (function () {
        'use strict'

        // 获取所有需要应用自定义Bootstrap验证样式的表单
        var forms = document.querySelectorAll('.needs-validation')

        // 遍历它们并阻止提交
        Array.prototype.slice.call(forms)
          .forEach(function (form) {
            form.addEventListener('submit', function (event) {
              if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
              }

              form.classList.add('was-validated')
            }, false)
          })
      })()
    </script>
            <script>
                document.getElementById('contact-form').addEventListener('submit', function (event) {
                    event.preventDefault();
                    var form = this;
                    var formData = new FormData(form);
                    var xhr = new XMLHttpRequest();
                    xhr.open(form.method, form.action);
                    xhr.setRequestHeader('Accept', 'application/json');
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState !== XMLHttpRequest.DONE) return;
                        var response = JSON.parse(xhr.responseText);
                        if (xhr.status === 200 && response.success) {
                            form.reset();
                            showMessage('sent-message');
                        } else {
                            showMessage('error-message');
                        }
                    };
                    xhr.send(formData);
                    showMessage('loading');
                });

                function showMessage(className) {
                    var messages = document.querySelectorAll('.loading, .error-message, .sent-message');
                    messages.forEach(function (message) {
                        message.style.display = 'none';
                    });
                    var message = document.querySelector('.' + className);
                    message.style.display = 'block';
                }
            </script>

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>
